<!DOCTYPE HTML>
<html>
<head>
<title>ThinkGo演示</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" href="/css/main.css">
<script type="text/javascript" src="/js/avalon.js"></script>
</head>
<body>
avalon
<table ms-controller="test" border="1">
    <tr>
        <td><input type="checkbox" ms-duplex-radio="allchecked" data-duplex-changed="checkAll"/>全选</td>
    </tr>
    <tr ms-repeat="data">
        <td><input type="checkbox"  ms-duplex-radio="el.checked" ms-data-index=$index data-duplex-changed="checkOne"/>xxxxxxxxxxxx</td>
    </tr>
</table>
</body>
<script>
var model = avalon.define({
    $id: "test",
    data: [{checked: false}, {checked: false}, {checked: false}],
    allchecked: false,
    checkAll: function() {
        var bool = this.checked
        model.data.forEach(function(el) {
            el.checked = bool
        })
    },
    checkOne: function() {
        if (!this.checked) {
            model.allchecked = false
        } else {
            model.allchecked = model.data.every(function(el) {
                return el.checked
            })
        }
    }
})
</script>
</html>
